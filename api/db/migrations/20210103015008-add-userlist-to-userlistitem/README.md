# Migration `20210103015008-add-userlist-to-userlistitem`

This migration has been generated by Greg Murray at 1/2/2021, 8:50:08 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "UserListItem" DROP CONSTRAINT "UserListItem_listId_fkey"

ALTER TABLE "UserListItem" DROP COLUMN "listId",
ADD COLUMN     "userListId" INTEGER NOT NULL

ALTER TABLE "UserListItem" ADD FOREIGN KEY("userListId")REFERENCES "List"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "UserListItem" ADD FOREIGN KEY("userListId")REFERENCES "UserList"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210103014211-add-list-to-userlistitem..20210103015008-add-userlist-to-userlistitem
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource DS {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider      = "prisma-client-js"
@@ -22,12 +22,13 @@
   UserListItem    UserListItem[]
 }
 model UserList {
-  id             Int    @id @default(autoincrement())
+  id             Int            @id @default(autoincrement())
   listId         Int
   userIdentifier String
-  list           List   @relation(fields: [listId], references: [id])
+  list           List           @relation(fields: [listId], references: [id])
+  userListItems  UserListItem[]
 }
 model ListItem {
   id            Int            @id @default(autoincrement())
@@ -41,12 +42,13 @@
 model UserListItem {
   id             Int           @id @default(autoincrement())
   userIdentifier String
   listItemId     Int
-  listId         Int
+  userListId     Int
   status         ReadingStatus @default(NOT_STARTED)
   listItem       ListItem      @relation(fields: [listItemId], references: [id])
-  list           List          @relation(fields: [listId], references: [id])
+  userList       List          @relation(fields: [userListId], references: [id])
+  UserList       UserList      @relation(fields: [userListId], references: [id])
 }
 enum ReadingStatus {
   NOT_STARTED
```
