# Migration `20210102230811-update-relations`

This migration has been generated by Greg Murray at 1/2/2021, 6:08:11 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "UserQueue" DROP CONSTRAINT "UserQueue_pkey",
ADD COLUMN "id" SERIAL,
ADD PRIMARY KEY ("id")

ALTER TABLE "UserQueueItem" DROP CONSTRAINT "UserQueueItem_pkey",
ADD COLUMN "id" SERIAL,
ADD PRIMARY KEY ("id")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210102061754-spelling..20210102230811-update-relations
--- datamodel.dml
+++ datamodel.dml
@@ -1,9 +1,9 @@
 datasource DS {
   // optionally set multiple providers
   // example: provider = ["sqlite", "postgresql"]
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider      = "prisma-client-js"
@@ -23,13 +23,12 @@
   queueItems  QueueItem[]
 }
 model UserQueue {
+  id      Int    @id @default(autoincrement())
   queueId Int
   userId  String
   queue   Queue  @relation(fields: [queueId], references: [id])
-
-  @@id([queueId, userId])
 }
 model QueueItem {
   id      Int             @id @default(autoincrement())
@@ -40,14 +39,13 @@
   users   UserQueueItem[]
 }
 model UserQueueItem {
+  id          Int           @id @default(autoincrement())
   userId      String
   queueItemId Int
   status      ReadingStatus @default(NOT_STARTED)
   queueItem   QueueItem     @relation(fields: [queueItemId], references: [id])
-
-  @@id([queueItemId, userId])
 }
 enum ReadingStatus {
   NOT_STARTED
```
